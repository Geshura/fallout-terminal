<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ROBCO INDUSTRIES TERMLINK</title>
  <style>
    body {
      background-color: black;
      color: #00ff00;
      font-family: 'Courier New', monospace;
      font-size: 16px;
      padding: 20px;
      white-space: pre;
      line-height: 1.4;
      user-select: none;
    }

    .crt {
      text-shadow: 0 0 5px #00ff00;
      animation: flicker 0.1s infinite alternate;
    }

    @keyframes flicker {
      0%   { opacity: 0.98; }
      100% { opacity: 1; }
    }

    .input-line {
      display: flex;
    }

    input {
      background: transparent;
      border: none;
      color: #00ff00;
      font-family: inherit;
      font-size: 16px;
      outline: none;
      width: 200px;
    }
  </style>
</head>
<body>
  <div class="crt" id="terminal"></div>
  <script>
    const terminal = document.getElementById("terminal");
    const words = ["VAULT", "CABLE", "POWER", "WASTE", "TRIAL", "CRATE", "STONE", "BONDS"];
    const correct = words[Math.floor(Math.random() * words.length)];
    const attemptsAllowed = 4;
    let attemptsLeft = attemptsAllowed;
    let isLocked = false;

    function randomSymbols(len) {
      const chars = "!@#$%^&*()_+=-{}[]:;<>?/\\|";
      let result = "";
      for (let i = 0; i < len; i++) {
        result += chars.charAt(Math.floor(Math.random() * chars.length));
      }
      return result;
    }

    function buildMemoryDump() {
      let output = "ROBCO INDUSTRIES (TM) TERMLINK PROTOCOL\n";
      output += "ENTER PASSWORD NOW\n\n";

      for (let i = 0; i < 16; i++) {
        const addr = "0x" + (i * 10).toString(16).padStart(4, '0').toUpperCase();
        let line = addr + " ";

        for (let j = 0; j < 2; j++) {
          let block = randomSymbols(12).split('');
          // 10% szans na wstawienie sÅ‚owa
          if (Math.random() < 0.2 && words.length) {
            const word = words.pop();
            const pos = Math.floor(Math.random() * (block.length - word.length));
            for (let k = 0; k < word.length; k++) {
              block[pos + k] = word[k];
            }
          }
          line += block.join('') + " ";
        }

        output += line + "\n";
      }

      output += "\nAttempts Remaining: " + attemptsLeft + "\n";
      return output;
    }

    function likeness(guess, correct) {
      return guess.split('').filter((ch, i) => ch === correct[i]).length;
    }

    function updateTerminal(text) {
      terminal.textContent += text + "\n";
      terminal.scrollTop = terminal.scrollHeight;
    }

    function createInput() {
      const inputLine = document.createElement("div");
      inputLine.className = "input-line";
      const prompt = document.createElement("span");
      prompt.textContent = "> ";
      const input = document.createElement("input");

      input.addEventListener("keydown", (e) => {
        if (e.key === "Enter" && !isLocked) {
          const guess = input.value.trim().toUpperCase();
          input.disabled = true;

          if (guess === correct) {
            updateTerminal("> " + guess + "\nACCESS GRANTED");
            isLocked = true;
          } else {
            const like = likeness(guess, correct);
            attemptsLeft--;
            updateTerminal("> " + guess + "\nENTRY DENIED. LIKENESS = " + like);
            if (attemptsLeft <= 0) {
              updateTerminal("\nTERMINAL LOCKED. PLEASE CONTACT AN ADMINISTRATOR.");
              isLocked = true;
            } else {
              updateTerminal("Attempts Remaining: " + attemptsLeft);
              createInput();
            }
          }
        }
      });

      inputLine.appendChild(prompt);
      inputLine.appendChild(input);
      terminal.appendChild(inputLine);
      input.focus();
    }

    terminal.textContent = buildMemoryDump();
    createInput();
  </script>
</body>
</html>
